{% extends 'game/base.html' %}
{% load static %}

{% block content %}
<div id="game-container">
    <div id="game-status">
        <h2>Game Status</h2>
        <p>Chapter: <span id="current-chapter">{{ story_progress.current_chapter }}</span></p>
        <div id="player-status">
            <h3>Player</h3>
            <p>Persuasion Level: <span id="player-persuasion">{{ game_state.player_persuasion_level }}</span></p>
            <p>Emotional State: <span id="player-emotion">{{ game_state.player_emotional_state }}</span></p>
        </div>
        <div id="demon-lord-status">
            <h3>Demon Lord</h3>
            <p>Resistance: <span id="demon-resistance">{{ game_state.demon_lord_resistance }}</span></p>
            <p>Emotional State: <span id="demon-emotion">{{ game_state.demon_lord_emotional_state }}</span></p>
        </div>
        <p>Argument Strength: <span id="argument-strength">{{ game_state.argument_strength }}</span></p>
    </div>

    <div id="dialogue-history">
        {% for dialogue in dialogues %}
            <div class="message {% if dialogue.speaker == 'player' %}player-message{% else %}demon-lord-message{% endif %}">
                <strong>{{ dialogue.speaker|title }}:</strong> {{ dialogue.content }}
            </div>
        {% endfor %}
    </div>

    <div id="player-controls">
        <form id="dialogue-form" method="post">
            {% csrf_token %}
            <textarea name="message" id="message-input" rows="3" placeholder="메시지를 입력하세요..."></textarea>
            <div id="persuasion-tools">
                <button type="button" class="persuasion-tool" data-tool="logic">논리 사용</button>
                <button type="button" class="persuasion-tool" data-tool="emotion">감정에 호소</button>
                <button type="button" class="persuasion-tool" data-tool="flattery">아첨</button>
                <button type="button" class="persuasion-tool" data-tool="threat">은근한 위협</button>
            </div>
            <button type="submit" id="send-message">보내기</button>
        </form>
    </div>

    <div id="game-tips">
        <h3>설득 팁</h3>
        <ul>
            <li>악마 군주의 이성에 호소하려면 논리를 사용하세요</li>
            <li>감정적 호소는 악마 군주의 감정을 움직일 수 있습니다</li>
            <li>아첨은 악마 군주의 경계심을 낮출 수 있습니다</li>
            <li>은근한 위협은 당신의 주장을 강화할 수 있지만, 조심하세요!</li>
        </ul>
    </div>
</div>

<script src="{% static 'js/game.js' %}"></script>
{% endblock %}